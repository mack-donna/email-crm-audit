{% extends "base.html" %}

{% block title %}Gmail Connection Status{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-2xl font-semibold mb-6">Gmail Account Connection</h2>
        
        {% if status == 'success' %}
        <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
            <div class="flex items-center">
                <svg class="w-6 h-6 text-green-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                <div>
                    <h3 class="text-lg font-medium text-green-900">Successfully Connected!</h3>
                    <p class="text-green-700 mt-1">Your Gmail account has been connected. You can now create drafts directly in Gmail.</p>
                </div>
            </div>
        </div>
        {% elif status == 'error' %}
        <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
            <div class="flex items-center">
                <svg class="w-6 h-6 text-red-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                </svg>
                <div>
                    <h3 class="text-lg font-medium text-red-900">Connection Failed</h3>
                    <p class="text-red-700 mt-1">There was an error connecting your Gmail account. Please try again.</p>
                </div>
            </div>
        </div>
        {% elif status == 'disconnected' %}
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
            <div class="flex items-center">
                <svg class="w-6 h-6 text-yellow-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                </svg>
                <div>
                    <h3 class="text-lg font-medium text-yellow-900">Gmail Disconnected</h3>
                    <p class="text-yellow-700 mt-1">Your Gmail account has been disconnected.</p>
                </div>
            </div>
        </div>
        {% endif %}
        
        <div class="border-t pt-6">
            <h3 class="text-lg font-medium mb-4">Current Status</h3>
            
            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                <div class="flex items-center">
                    <svg class="w-8 h-8 text-gray-600 mr-3" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                    </svg>
                    <div>
                        <p class="font-medium">Gmail Account</p>
                        {% if connected %}
                        <p class="text-sm text-green-600">Connected</p>
                        {% else %}
                        <p class="text-sm text-gray-500">Not connected</p>
                        {% endif %}
                    </div>
                </div>
                
                <div>
                    {% if connected %}
                    <a href="{{ url_for('gmail_disconnect') }}" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                        Disconnect
                    </a>
                    {% else %}
                    <a href="{{ url_for('gmail_connect') }}" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                        Connect Gmail
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="mt-6 text-sm text-gray-600">
            <p><strong>Note:</strong> Connecting your Gmail account allows the app to create draft emails in your Gmail account. We only request permission to compose drafts and will never read your existing emails or send emails without your approval.</p>
        </div>
        
        <div class="mt-6 flex justify-between">
            <a href="{{ url_for('index') }}" class="text-indigo-600 hover:text-indigo-700">
                ← Back to Dashboard
            </a>
            <a href="{{ url_for('upload_csv') }}" class="text-indigo-600 hover:text-indigo-700">
                Create New Campaign →
            </a>
        </div>
    </div>
</div>
{% endblock %}